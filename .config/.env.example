# Deployment Environment Configuration

# ============================================
# REQUIRED VARIABLES - Must be set for deployment
# ============================================

# AI Provider API Key (at least one required)
# Primary: NVIDIA NIM for Kimi K2.5 (recommended - 256K context, $0.6/M tokens)
# Get from: https://build.nvidia.com/
NVIDIA_NIM_API_KEY=nvapi-your_key_here

# Alternative: OpenRouter (supports multiple models)
# Get from: https://openrouter.ai/
# OPENROUTER_API_KEY=sk-or-v1-your_key_here

# OpenAI (GPT-4, GPT-4o, etc.)
# Get from: https://platform.openai.com/
# OPENAI_API_KEY=sk-your_key_here

# Anthropic (Claude Opus 4.5, Sonnet, etc.)
# Get from: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-your_key_here

# Google Gemini (Gemini 2.5 Pro, 2.0 Flash)
# Get from: https://aistudio.google.com/
# GOOGLE_API_KEY=your_key_here
# GEMINI_API_KEY=your_key_here

# Groq (fast inference provider)
# Get from: https://groq.com/
# GROQ_API_KEY=gsk-your_key_here

# Together AI (open source model provider)
# Get from: https://together.ai/
# TOGETHER_API_KEY=your_key_here

# Ollama (local model runner)
# Optional: Override default localhost:11434
# OLLAMA_HOST=localhost:11434

# ============================================
# SERVER CONFIGURATION
# ============================================

NODE_ENV=production
PORT=3000

# CORS Origins - comma-separated list of allowed origins
# For production, set this to your frontend domain(s)

# Event mode: 'poll' for serverless, 'sse' for traditional servers
EVENTS_MODE=poll

# ============================================
# ANALYTICS CONFIGURATION (PostHog)
# ============================================

# PostHog API Key - Get from https://app.posthog.com/project/settings
POSTHOG_API_KEY=phc_your_key_here

# PostHog Host (defaults to https://us.i.posthog.com)
POSTHOG_HOST=https://us.i.posthog.com

# Enable/disable analytics tracking
ANALYTICS_ENABLED=true

# Debug mode for analytics (logs to console)
ANALYTICS_DEBUG=false

# Analytics flush interval in milliseconds
ANALYTICS_FLUSH_INTERVAL=10000

# Public base URL for webhooks and callbacks

# ============================================
# ============================================

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key

# ============================================
# ============================================

QSTASH_TOKEN=your_qstash_token
QSTASH_URL=https://qstash.upstash.io/v2/publish/
JOB_WORKER_SECRET=your_random_secret_here

# ============================================
# PRODUCTION SAFEGUARDS (Highly Recommended)
# ============================================

# Block suspicious prompts (prevents prompt injection)
BLOCK_SUSPICIOUS_PROMPTS=true

# Require authentication for API access
REQUIRE_AUTH_FOR_API=true

# Strict production security (enables host validation, etc.)
# SECURITY_STRICT_PROD=true

# Host allowlist (comma-separated, required when SECURITY_STRICT_PROD=true)
# ALLOWED_HOSTS=your-domain.com,api.your-domain.com

# Encryption key for sensitive data (32+ character random string)
# Generate with: openssl rand -base64 32
# MASTER_KEY=your_random_32_char_key_here

# Output filtering (optional)
# OUTPUT_FILTER_PII=false
# OUTPUT_FILTER_HARMFUL=false
# STRICT_COMMAND_ALLOWLIST=false

# ============================================
# OPTIONAL SERVICES
# ============================================

# Redis (optional - for caching and rate limiting)
# REDIS_HOST=your-redis-host
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# Stripe (optional - for billing)
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# GitHub (optional - for repository operations and webhooks)
# GITHUB_TOKEN=ghp_your_token_here
# GITHUB_WEBHOOK_SECRET=your_webhook_secret

# Pinecone (optional - for vector storage / RAG)
# Get from: https://www.pinecone.io/
# PINECONE_API_KEY=your_api_key
# PINECONE_INDEX=your_index_name
# PINECONE_HOST=your-index-host.pinecone.io
# PINECONE_NAMESPACE=default

# Twilio (optional - for messaging)
# MESSAGING_PROVIDER=twilio
# TWILIO_ACCOUNT_SID=...
# TWILIO_AUTH_TOKEN=...
# TWILIO_REPLY_TO_NUMBER=...
# TWILIO_WEBHOOK_SECRET=...

# NVIDIA NIM self-hosted (optional - for on-prem deployment)
# NVIDIA_NIM_URL=https://your-nim-endpoint

# Webhooks
# GRUMP_WEBHOOK_SECRET=your_webhook_secret
# GRUMP_WEBHOOK_URLS=https://your-webhook-endpoint

# ============================================
# DEVELOPMENT ONLY (Not needed for production)
# ============================================

# Intent compiler path (local development only)
# GRUMP_INTENT_PATH=../intent-compiler/target/release/intent_compiler

# Docker sandbox (for local code execution)
# DOCKER_HOST=unix:///var/run/docker.sock
# SANDBOX_TIMEOUT_MS=60000
# SANDBOX_MEMORY_LIMIT=512m

# Metrics authentication
# METRICS_AUTH=user:password

# OpenTelemetry endpoint
# OTLP_ENDPOINT=https://your-otel-collector
